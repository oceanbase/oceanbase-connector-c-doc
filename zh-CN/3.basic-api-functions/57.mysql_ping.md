mysql_ping() 
=================================

`mysql_ping()` 用于检查与服务器的连接是否正常。 

语法 
-----------------------

```c
int
mysql_ping(MYSQL *mysql)
```



返回值 
------------------------

如果与服务器的连接处于活动状态，返回零；如果发生错误，则返回非零。

返回非零并不能判断 MySQL 服务器已关闭，也可能是其他原因（例如网络问题）导致连接中断。

报错信息 
-------------------------

* `CR_COMMANDS_OUT_OF_SYNC`：命令的执行顺序不正确。

  

* `CR_SERVER_GONE_ERROR`：与 OBServer 的连接已经中断。

  

* `CR_UNKNOWN_ERROR`：出现未知错误。

  




使用说明 
-------------------------

如果连接已断开并且启用了自动重新连接，则会尝试重新连接。如果连接关闭并且自动重新连接被禁用，`mysql_ping()` 将返回错误。

默认情况下禁用自动重新连接，可以使用 `MYSQL_OPT_RECONNECT` 选项调用 `mysql_options()` 来启用。

`mysql_ping()` 可以用于长时间空闲的客户端，以检查服务器是否已经关闭连接并在必要时重新连接。

`mysql_ping()` 一般会自动引发重新连接，不会给出明确的指示。如果发生重新连接，连接的某些特征将被重置。如果要判断是否发生重连，可以在调用 `mysql_ping()` 之前先调用 `mysql_thread_id()` 获取原始连接标识符，然后再次调用 `mysql_thread_id()` 查看标识符是否发生变化。
